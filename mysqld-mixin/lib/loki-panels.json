[
  {
    "collapsed": false,
    "gridPos": {
      "h": 1,
      "w": 24,
      "x": 0,
      "y": 122
    },
    "id": 990,
    "panels": [],
    "title": "Logs",
    "type": "row"
  },
  {
    "id": 991,
    "gridPos": {
      "h": 6,
      "w": 12,
      "x": 0,
      "y": 129
    },
    "type": "timeseries",
    "title": "Logs by Level",
    "datasource": {
      "uid": "${loki_datasource}",
      "type": "loki"
    },
    "fieldConfig": {
      "defaults": {
        "custom": {
          "drawStyle": "bars",
          "lineInterpolation": "linear",
          "barAlignment": 0,
          "lineWidth": 1,
          "fillOpacity": 0,
          "gradientMode": "none",
          "spanNulls": false,
          "showPoints": "auto",
          "pointSize": 5,
          "stacking": {
            "mode": "normal",
            "group": "A"
          },
          "axisPlacement": "auto",
          "axisLabel": "",
          "scaleDistribution": {
            "type": "linear"
          },
          "hideFrom": {
            "tooltip": false,
            "viz": false,
            "legend": false
          },
          "thresholdsStyle": {
            "mode": "off"
          }
        },
        "color": {
          "mode": "palette-classic",
          "fixedColor": "red"
        },
        "thresholds": {
          "mode": "absolute",
          "steps": [
            {
              "color": "green",
              "value": null
            },
            {
              "color": "red",
              "value": 80
            }
          ]
        },
        "mappings": []
      },
      "overrides": []
    },
    "options": {
      "tooltip": {
        "mode": "single"
      },
      "legend": {
        "displayMode": "list",
        "placement": "bottom",
        "calcs": [
          "sum"
        ]
      }
    },
    "targets": [
      {
        "datasource": {
          "type": "loki",
          "uid": "${loki_datasource}"
        },
        "expr": "sum(count_over_time({job=~\"$job\", instance=~\"$instance\", label=~\".+\"}[$__interval])) by (label)",
        "legendFormat": "{{ label }}",
        "refId": "A"
      }
    ],
    "interval": null
  },
  {
    "id": 992,
    "gridPos": {
      "h": 6,
      "w": 12,
      "x": 12,
      "y": 129
    },
    "type": "timeseries",
    "title": "Logs by Error Codes",
    "datasource": {
      "uid": "${loki_datasource}",
      "type": "loki"
    },
    "fieldConfig": {
      "defaults": {
        "custom": {
          "drawStyle": "line",
          "lineInterpolation": "linear",
          "barAlignment": 0,
          "lineWidth": 1,
          "fillOpacity": 0,
          "gradientMode": "none",
          "spanNulls": false,
          "showPoints": "auto",
          "pointSize": 5,
          "stacking": {
            "mode": "normal",
            "group": "A"
          },
          "axisPlacement": "auto",
          "axisLabel": "",
          "scaleDistribution": {
            "type": "linear"
          },
          "hideFrom": {
            "tooltip": false,
            "viz": false,
            "legend": false
          },
          "thresholdsStyle": {
            "mode": "off"
          }
        },
        "color": {
          "mode": "palette-classic",
          "fixedColor": "red"
        },
        "thresholds": {
          "mode": "absolute",
          "steps": [
            {
              "color": "green",
              "value": null
            },
            {
              "color": "red",
              "value": 80
            }
          ]
        },
        "mappings": []
      },
      "overrides": []
    },
    "options": {
      "tooltip": {
        "mode": "single"
      },
      "legend": {
        "displayMode": "list",
        "placement": "bottom",
        "calcs": [
          "sum"
        ]
      }
    },
    "targets": [
      {
        "datasource": {
          "uid": "${loki_datasource}",
          "type": "loki"
        },
        "refId": "B",
        "hide": false,
        "expr": "sum(count_over_time({job=~\"$job\", instance=~\"$instance\", err_code!=\"\", label=~\".+\"}[$__interval])) by (label, err_code)",
        "legendFormat": "{{ label }}: {{ err_code }}"
      }
    ],
    "description": "Error codes are available in MySQL 8.0 and above.",
    "interval": null
  },
  {
    "id": 993,
    "gridPos": {
      "h": 20,
      "w": 24,
      "x": 0,
      "y": 135
    },
    "type": "logs",
    "title": "MySQL Errors Log",
    "datasource": {
      "type": "loki",
      "uid": "${loki_datasource}"
    },
    "options": {
      "showTime": false,
      "showLabels": false,
      "showCommonLabels": false,
      "wrapLogMessage": false,
      "prettifyLogMessage": false,
      "enableLogDetails": true,
      "dedupStrategy": "none",
      "sortOrder": "Descending"
    },
    "targets": [
      {
        "datasource": {
          "type": "loki",
          "uid": "${loki_datasource}"
        },
        "expr": "{job=~\"$job\", instance=~\"$instance\"}",
        "refId": "A"
      }
    ]
  }
]